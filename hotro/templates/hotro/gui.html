


{% extends "base-customer.html" %}
{% block title %}H·ªó tr·ª£ kh√°ch h√†ng | Star Gym Fitness{% endblock %}

{% block content %}


<style>
:root {
  --color-primary: #f7c948;
  --color-text-light: #fff;
  --color-dark-card: rgba(12,12,12,0.95);
  --color-border: #333;
}

/* TITLE */
.page-title {
  color:#fff;
  font-size:40px;
  font-weight:700;
  margin-bottom:22px;
  display:flex;
  align-items:center;
  text-transform:uppercase;
}
.page-title::before {
  content:'';
  width:6px;
  height:1.1em;
  background-color:var(--color-primary);
  margin-right:15px;
}

/* CARD STYLE */
.support-card {
  background: var(--color-dark-card);
  border-radius: 16px;
  border: 1px solid var(--color-border);
  box-shadow: 0 0 25px rgba(0,0,0,0.6);
  padding: 25px 30px;
}

/* GRID */
.support-layout {
  display: flex;
  gap: 30px;
  align-items: stretch;     /* √©p 2 c·ªôt cao b·∫±ng nhau */
}
.support-left { flex:1.2; }
.support-right { flex:1; max-width:480px; }

/* LABEL */
.form-label { color:white; }

/* FILE INPUT */
.hidden-file-input { display:none !important; }
.custom-file-box { display:flex; align-items:center; gap:12px; }
.btn-upload {
  background-color:#f7c948;
  color:#111;
  padding:8px 18px;
  border-radius:6px;
  border:1px solid #f7c948;
  font-weight:600;
  cursor:pointer;
  transition:0.25s;
}
.btn-upload:hover { background:transparent; color:#f7c948; }
.file-name { color:#ccc; font-style:italic; }

.preview-wrapper { position: relative; display:inline-block; }
.remove-preview {
  position:absolute;
  top:-6px;
  right:-6px;
  background:red;
  color:white;
  width:22px;
  height:22px;
  border-radius:50%;
  font-size:14px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
#preview-box img {
  width:120px; height:120px; object-fit:cover;
  border-radius:6px; border:1px solid #444;
}

/* MACHINE LIST */
.machine-card {
  background:#111; border-radius:12px; border:1px solid #333;
  padding:15px; text-align:center; transition:0.25s;
}
.machine-card img {
  width:100%; height:150px; object-fit:contain;
  background:#000; border-radius:10px;
}
.machine-card:hover { transform:scale(1.03); border-color:#f7c948; }
.machine-name { margin-top:10px; font-weight:700; color:#f7c948; }
.machine-desc { font-size:14px; color:#ccc; }
.machine-grid {
  display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:20px;
}

/* LOADING */
#loading-overlay {
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.7);
  display:none;
  z-index:9999;
  color:white;
  justify-content:center;
  align-items:center;
  font-size:28px;
  font-weight:600;
  letter-spacing:1px;
}

/* üî• HIDE SCROLLBAR c·ªßa textarea */
textarea::-webkit-scrollbar {
    display: none;
}
textarea {
    scrollbar-width: none;
    -ms-overflow-style: none;
}

/* MATCH SELECT STYLE WITH TEXTAREA */
/* √î LO·∫†I PH·∫¢N H·ªíI ‚Äì gi·ªëng 100% textarea */
.support-card select {
    background-color: #2b2e31 !important;   /* n·ªÅn t·ªëi gi·ªëng textarea */
    color: #fff !important;
    border: 1px solid #555 !important;      /* border gi·ªëng textarea */
    border-radius: 6px !important;
    padding: 10px 12px !important;          /* padding match v·ªõi textarea */
    height: auto !important;                /* ƒë·ªÉ t·ª± gi√£n theo text */
    min-height: 42px !important;            /* fix chi·ªÅu cao default */
    appearance: none !important;            /* b·ªè style m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát */
    outline: none !important;
}

/* Khi focus ‚Äì gi·ªëng textarea lu√¥n */
.support-card select:focus {
    border-color: #555 !important;          /* nh∆∞ textarea */
    box-shadow: none !important;
}

/* MODAL PH√ìNG TO ·∫¢NH */
.modal-img {
    display: none;
    position: fixed;
    z-index: 99999;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    justify-content: center;
    align-items: center;
}

.modal-img-content {
    max-width: 80%;
    max-height: 80%;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(255,255,255,0.3);
    animation: zoomIn 0.2s ease;
}

@keyframes zoomIn {
    from { transform: scale(0.7); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

/* ========== STYLE Y CHANG REVIEW G·∫¶N ƒê√ÇY ========== */

/* CARD M√ÅY ‚Äì ƒë·ªìng b·ªô review-card */
.machine-card {
    background: rgba(20,20,20,0.95);
    border-radius: 12px;
    border: 1px solid #333;
    padding: 15px;
    cursor: pointer;
    transition: 0.22s ease;
    box-shadow: 0 0 18px rgba(0,0,0,0.45);
}

.machine-card:hover {
    transform: scale(1.03);
    border-color: var(--color-primary);
    box-shadow: 0 0 22px rgba(255,215,0,0.25);
}

/* ·∫¢NH ‚Äì gi·ªëng .review-thumb */
.machine-card img {
    width: 100%;
    height: 130px;
    object-fit: contain;
    border-radius: 8px;
    border: 1px solid #444;
    background: #000;
    transition: 0.25s ease;
}

.machine-card:hover img {
    box-shadow: 0 0 12px rgba(255,255,255,0.35);
}

/* TEXT */
.machine-name {
    margin-top: 10px;
    font-weight: 7100;
    color: #f7c948;
    font-size: 15px;
}

.machine-desc {
    font-size: 13px;
    color: #ccc;
    margin-top: 4px;
}

/* GRID ‚Äì thu nh·ªè gap gi·ªëng b·ªë c·ª•c review h∆°n */
.machine-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 18px;
    margin-top: 5px;
}

/* SCROLL ‚Äì gi·ªëng review-scroll */
.machine-scroll {
    max-height: 540px;
    overflow-y: auto;
    padding-right: 8px;
    margin-top: 10px;
}

.machine-scroll::-webkit-scrollbar {
    width: 6px;
}
.machine-scroll::-webkit-scrollbar-thumb {
    background: #555;
    border-radius: 6px;
}
.machine-scroll::-webkit-scrollbar-thumb:hover {
    background: #777;
}
.machine-scroll::-webkit-scrollbar-track {
    background: #1a1a1a;
}

/* B·∫ÆT 2 C·ªòT CAO B·∫∞NG */
.support-left,
.support-right {
    display: flex;
    flex-direction: column;
}


</style><!-- NEW Loading screen -->


<div id="loading-overlay">ƒêang g·ª≠i ph·∫£n h·ªìi...</div>

<div class="container" style="max-width:100%">

  <div class="my-4">
    <h2 class="page-title">H·ªó tr·ª£ kh√°ch h√†ng</h2>
    <p class="text-secondary">G·ª≠i ph·∫£n h·ªìi c·ªßa b·∫°n ƒë·ªÉ Star Gym Fitness h·ªó tr·ª£ t·ªët h∆°n</p>
  </div>

  <!-- ========== 2 COLUMN LAYOUT ========== -->
  <div class="support-layout">

      <!-- LEFT -->
      <div class="support-card support-left" id="leftBlock">

        <form id="supportForm" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Lo·∫°i ph·∫£n h·ªìi -->
            <div class="mb-3">
                <label class="form-label">Lo·∫°i ph·∫£n h·ªìi:</label>
                <div>{{ form.loai }}</div>
                <small class="text-secondary">
                    G·ª£i √Ω: Khi·∫øu n·∫°i d·ªãch v·ª• ‚Ä¢ G√≥p √Ω c·∫£i thi·ªán ‚Ä¢ C√¢u h·ªèi th·∫Øc m·∫Øc
                </small>
            </div>

            <!-- N·ªôi dung -->
            <div class="mb-3">
                <label class="form-label">N·ªôi dung ph·∫£n h·ªìi:</label>
                <textarea name="noi_dung" rows="4"
                  class="form-control bg-dark text-light border-secondary"
                  ></textarea>

                {% if da_gui %}
                <p class="fst-italic mt-3 text-center" style="color:#FFC300;">
                    ƒê√£ ti·∫øp nh·∫≠n ph·∫£n h·ªìi. C·∫£m ∆°n b·∫°n ƒë√£ li√™n h·ªá!
                </p>
                {% endif %}
               
            </div>

            <!-- Upload ·∫£nh -->
            <div class="mb-4">
                <label class="form-label mb-2">ƒê√≠nh k√®m ·∫£nh (tu·ª≥ ch·ªçn):</label>

                <div class="custom-file-box">
                    <button type="button" class="btn-upload"
                        onclick="document.getElementById('anh_minh_chung').click();">
                        Ch·ªçn ·∫£nh‚Ä¶
                    </button>
                    <span id="file-name" class="file-name">Ch∆∞a c√≥ ·∫£nh n√†o</span>
                    <input type="file" id="anh_minh_chung" name="anh" accept="image/*"
                           class="hidden-file-input" multiple>
                </div>

                <div id="preview-box"
                     style="display:flex; flex-wrap:wrap; gap:10px; margin-top:15px;"></div>
            </div>

            <!-- Buttons -->
            <div class="d-flex justify-content-center gap-3">
              <button class="btn btn-warning fw-semibold px-4" type="submit">G·ª≠i</button>
              <a href="{% url 'gui_phan_hoi' %}" class="btn btn-outline-light px-4">H·ªßy</a>
            </div>

            <a href="{% url 'theo_doi' %}"
   class="d-block text-center mt-4 text-white fst-italic"
   style="text-decoration:underline;">
   Theo d√µi ph·∫£n h·ªìi
</a>
            <!-- NEW: Extra support info -->
            <div class="mt-4 text-secondary" style="font-size:14px;">
              <p class="mb-1"><strong style="color:#f7c948;">Hotline h·ªó tr·ª£ nhanh:</strong> 0931 544 886</p>
              <p class="mb-1"><strong style="color:#f7c948;">Email ti·∫øp nh·∫≠n:</strong> stargymfitness@gmail.com</p>
              <p class="mb-1"><strong style="color:#f7c948;">Th·ªùi gian x·ª≠ l√Ω:</strong> 24 - 48 gi·ªù l√†m vi·ªác</p>
            </div>

        </form>

      </div>

      <!-- RIGHT (y nguy√™n) -->
      <div class="support-card support-right" id="rightBlock">
        <h4 class="text-warning text-center mb-3">Thi·∫øt b·ªã t·∫≠p luy·ªán</h4>

<div class="machine-scroll">
        <div class="machine-grid">

            <!-- M√ÅY (gi·ªØ nguy√™n to√†n b·ªô) -->
            <div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-toan-than.png')">
    <img src="/media/anhmaytap/may-tap-toan-than.png">
    <div class="machine-name">M√°y t·∫≠p to√†n th√¢n</div>
    <div class="machine-desc">H·ªó tr·ª£ v·∫≠n ƒë·ªông to√†n th√¢n, ƒë·ªët m·ª° hi·ªáu qu·∫£.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-chay-bo.png')">
    <img src="/media/anhmaytap/may-chay-bo.png">
    <div class="machine-name">M√°y ch·∫°y b·ªô</div>
    <div class="machine-desc">TƒÉng s·ª©c b·ªÅn tim m·∫°ch, c·∫£i thi·ªán th·ªÉ l·ª±c.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-bung.png')">
    <img src="/media/anhmaytap/may-tap-bung.png">
    <div class="machine-name">M√°y t·∫≠p b·ª•ng</div>
    <div class="machine-desc">T√°c ƒë·ªông c∆° b·ª•ng tr√™n ‚Äì d∆∞·ªõi ‚Äì li√™n s∆∞·ªùn.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-nguc.png')">
    <img src="/media/anhmaytap/may-tap-nguc.png">
    <div class="machine-name">M√°y t·∫≠p ng·ª±c</div>
    <div class="machine-desc">Ph√°t tri·ªÉn c∆° ng·ª±c, vai v√† tay sau.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-dui-sau.png')">
    <img src="/media/anhmaytap/may-tap-dui-sau.png">
    <div class="machine-name">M√°y t·∫≠p ƒë√πi sau</div>
    <div class="machine-desc">T·∫≠p trung v√†o nh√≥m c∆° hamstring.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-co-nguc.png')">
    <img src="/media/anhmaytap/may-tap-co-nguc.png">
    <div class="machine-name">M√°y t·∫≠p c∆° ng·ª±c</div>
    <div class="machine-desc">H·ªó tr·ª£ ph√°t tri·ªÉn c∆° ng·ª±c m·∫°nh m·∫Ω.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-tay-truoc.png')">
    <img src="/media/anhmaytap/may-tap-tay-truoc.png">
    <div class="machine-name">M√°y t·∫≠p tay tr∆∞·ªõc</div>
    <div class="machine-desc">T·∫≠p trung nh√≥m c∆° biceps.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-tap-tay-sau.png')">
    <img src="/media/anhmaytap/may-tap-tay-sau.png">
    <div class="machine-name">M√°y t·∫≠p tay sau</div>
    <div class="machine-desc">T√°c ƒë·ªông l√™n nh√≥m c∆° triceps.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-dap-chan-ganh-dui.png')">
    <img src="/media/anhmaytap/may-dap-chan-ganh-dui.png">
    <div class="machine-name">M√°y ƒë·∫°p ch√¢n ‚Äì g√°nh ƒë√πi</div>
    <div class="machine-desc">Ph√°t tri·ªÉn c∆° ch√¢n v√† m√¥ng.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/may-day-vai.png')">
    <img src="/media/anhmaytap/may-day-vai.png">
    <div class="machine-name">M√°y ƒë·∫©y vai</div>
    <div class="machine-desc">T·∫≠p trung vai gi·ªØa & vai sau.</div>
</div>

<div class="machine-card" onclick="openImgModal('/media/anhmaytap/dan-ta-keo-cap-da-nang.png')">
    <img src="/media/anhmaytap/dan-ta-keo-cap-da-nang.png">
    <div class="machine-name">D√†n t·∫° k√©o c√°p ƒëa nƒÉng</div>
    <div class="machine-desc">Thi·∫øt b·ªã ƒëa ch·ª©c nƒÉng ‚Äì t·∫≠p to√†n th√¢n.</div>
</div>
        </div>

        </div>
      </div>

  </div>

</div>


<!-- MODAL PH√ìNG TO ·∫¢NH -->
<div id="imgModal" class="modal-img" onclick="closeImgModal(event)">
    <img id="imgModalContent" class="modal-img-content">
</div>

<script>
/* ============================================
   üî• MULTIPLE FILE HANDLING + PREVIEW + REMOVE
   ============================================ */
let newImages = [];
const input2 = document.getElementById("anh_minh_chung");
const previewBox2 = document.getElementById("preview-box");
const fileNameText2 = document.getElementById("file-name");

/* Khi ch·ªçn ·∫£nh t·ª´ m√°y */
input2.addEventListener("change", () => {
    for (let file of input2.files) newImages.push(file);
    renderPreview();
    refreshInput();
});

/* T·∫°o khung preview t·ª´ng ·∫£nh */
function renderPreview() {
    previewBox2.innerHTML = "";

    newImages.forEach((file, index) => {
        const wrap = document.createElement("div");
        wrap.classList.add("preview-wrapper");

        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        img.classList.add("preview-img");
        img.onclick = () => openImgModal(img.src);   // üî• ph√≥ng to ·∫£nh ƒë√£ ch·ªçn

        const remove = document.createElement("div");
        remove.classList.add("remove-preview");
        remove.textContent = "√ó";

        remove.onclick = () => {
            newImages.splice(index, 1);
            renderPreview();
            refreshInput();
        };

        wrap.appendChild(img);
        wrap.appendChild(remove);
        previewBox2.appendChild(wrap);
    });

    fileNameText2.textContent =
        newImages.length ? `${newImages.length} ·∫£nh ƒë√£ ch·ªçn` : "Ch∆∞a c√≥ ·∫£nh n√†o";
}

/* L√†m l·∫°i input.files */
function refreshInput() {
    const dt = new DataTransfer();
    newImages.forEach(f => dt.items.add(f));
    input2.files = dt.files;
}

/* ============================================
   üî• MODAL PH√ìNG TO ·∫¢NH (d√πng chung v·ªõi m√°y t·∫≠p)
   ============================================ */
function openImgModal(src) {
    document.getElementById("imgModal").style.display = "flex";
    document.getElementById("imgModalContent").src = src;
}

function closeImgModal(event) {
    if (event.target.id === "imgModal" || event.target.classList.contains("img-modal-close")) {
        document.getElementById("imgModal").style.display = "none";
    }
}
</script>



{% endblock %}
