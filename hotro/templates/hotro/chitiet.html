{% extends "base-customer.html" %}
{% block content %}

<style>
:root {
  --color-primary: #f7c948;
  --color-text-light: #fff;
  --color-dark-card: #222;
  --color-border: #333;
}

/* ===== TIÊU ĐỀ ===== */
.page-title {
  color:#fff;
  font-size: 40px;
  font-weight: 700;
  margin-bottom: 30px;
  display: flex;
  align-items: center;
  text-transform: uppercase;
}
.page-title::before {
  content: '';
  display: block;
  width: 6px;
  height: 1.1em;
  background-color: var(--color-primary);
  margin-right: 15px;
}

/* ===== BUTTON STYLE CHUNG ===== */
.btn-gym {
    background-color: #ffcc33;
    color: #111 !important;
    border: 1px solid #ffcc33;
    padding: 8px 22px;
    border-radius: 6px;
    font-weight: 700;          /* IN ĐẬM */
    text-decoration: none !important;   /* KHÔNG GẠCH CHÂN */
    transition: 0.25s ease;
    margin: 0 10px;            /* KHOẢNG CÁCH 2 NÚT */
}

.btn-gym:hover {
    background-color: transparent;
    color: #ffcc33 !important;
    border-color: #ffcc33;
}

/* ===== MODAL PHÓNG TO ẢNH ===== */
.img-modal {
    display: none;
    position: fixed;
    z-index: 99999;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    justify-content: center;
    align-items: center;
}

.img-modal img {
    max-width: 80%;
    max-height: 80%;
    border-radius: 10px;
    box-shadow: 0 0 25px rgba(255,255,255,0.3);
    animation: zoomIn 0.2s ease;
}

@keyframes zoomIn {
    from { transform: scale(0.6); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

</style>

<div class="page-wrap my-4">
  <h2 class="page-title">Theo dõi phản hồi</h2>

  <p><b>Ngày:</b> {{ ph.ngay_gui|date:"d-m-Y" }}</p>
  <p><b>Loại phản hồi:</b> {{ ph.loai }}</p>
  <p><b>Nội dung:</b> {{ ph.noi_dung }}</p>
  <p><b>Trả lời phản hồi:</b> {{ ph.tra_loi|default:"(Chưa có phản hồi)" }}</p>

  {% if ph.ds_anh.count > 0 %}
      <p><b>Ảnh đính kèm:</b></p>

      <div style="display:flex; flex-wrap:wrap; gap:15px; margin-top:10px;">
          {% for a in ph.ds_anh.all %}
    <img src="{{ a.anh.url }}"
         onclick="openImgModal('{{ a.anh.url }}')"
         style="width:180px; height:180px; object-fit:cover;
                border-radius:8px; border:1px solid #444; cursor:pointer;">
{% endfor %}
      </div>

  {% else %}
      <p><b>Ảnh đính kèm:</b> (Không có ảnh)</p>
  {% endif %}

  <!-- ===== NÚT HÀNH ĐỘNG ===== -->
  <div class="mt-4 d-flex justify-content-center">

      <!-- NÚT TRỞ VỀ -->
      <a href="{% url 'gui_phan_hoi' %}" class="btn-gym">Trở về</a>

      <!-- NÚT CHỈNH SỬA KHIẾU NẠI -->
      <a href="{% url 'chinh_sua' ph.id %}" class="btn-gym">Chỉnh sửa</a>

  </div>

</div>


<!-- ===== MODAL PHÓNG TO ẢNH ===== -->
<div id="imgModal" class="img-modal" onclick="closeImgModal(event)">
    <img id="modalImg">
</div>
<script>
function openImgModal(src) {
    document.getElementById("modalImg").src = src;
    document.getElementById("imgModal").style.display = "flex";
}

function closeImgModal(e) {
    if (e.target.id === "imgModal") {
        document.getElementById("imgModal").style.display = "none";
    }
}
</script>
{% endblock %}
